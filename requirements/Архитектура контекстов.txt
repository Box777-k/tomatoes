АРХИТЕКТУРА РАЗДЕЛЕНИЯ КОНТЕКСТОВ И СКОУПОВ

КОНТЕКСТЫ:
1. Операционный учёт - оперативные операции с деньгами, товарами, производством
2. Бухгалтерский учёт - проводки, план счетов, закрытие периодов

СКОУПЫ:
1. Финансы - движение денег (счета, кассы, кошельки)
2. Материалы и услуги - складской учёт (склады, товары, остатки)
3. Производство - выращивание продукции (теплицы, партии, выпуск)

ПОТОК ДАННЫХ:
- Данные идут однонаправленно: Операционный → Бухгалтерский
- Операционные события генерируют бухгалтерские проводки
- Обратная связь отсутствует (нет прокидывания из бухгалтерии в операционный)
- Если нужны корректировки - вносятся на операционном уровне

СТРУКТУРА ОПЕРАЦИОННОГО УРОВНЯ:

Финансы:
- OperationalFinanceAccount (счета, кошельки, кассы)
- OperationalFinanceTransaction (движение денег)

Материалы и услуги:
- OperationalWarehouse (склады, машины, магазины)
- OperationalWarehouseTransaction (движение товаров, перемещения)
- OperationalWarehouseItem (остатки по товарам на складах)

Производство:
- OperationalProductionTransaction (списание материалов, выпуск продукции)
- Метаданные: greenhouse_id, batch_number, product_variety, period, cost_center

СТРУКТУРА БУХГАЛТЕРСКОГО УРОВНЯ:
- AccountingAccount (план счетов)
- AccountingEntry (проводки дебет-кредит)
- AccountingPeriod (периоды с закрытием)
- AccountingMapping (правила генерации проводок из операционных событий)

ОСОБЕННОСТИ:
- Бухгалтерский уровень закрывается по закрытию периода
- Проводки закрываются каждое установленное число (последний день месяца или каждую декаду)
- Корректировки операций требуют ручной отмены проводок ролью с правами
- Возможность создавать проводки напрямую в бухгалтерии без операционного документа
